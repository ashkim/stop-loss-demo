{{ define "content" }}  <div class="container">
    <h2>Place Stop-Loss Order</h2>
    <form hx-post="/place-order" hx-target="#order-status-area" hx-swap="innerHTML">
        <label for="security">Security:</label>
        <input type="text" id="security" name="security" required><br>

        <label for="price">Stop-Loss Price:</label>
        <input type="number" id="price" name="price" step="0.01" required><br>

        <label for="quantity">Quantity:</label>
        <input type="number" id="quantity" name="quantity" type="number" required><br>

        <button type="submit">Place Order</button>
    </form>

    <h2>Order Status</h2>
    <div id="order-status-area" hx-get="/sse-orders" hx-trigger="load, every 3s" hx-swap="innerHTML">
        {{ template "order_list" .Orders }} </div>
    <div id="sse-status">
        SSE Status: <span id="sse-connection-status">Connecting...</span>
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const sseStatusSpan = document.getElementById('sse-connection-status');
            const eventSource = new EventSource("/sse-orders");

            eventSource.onopen = () => {
                sseStatusSpan.textContent = 'Connected';
                sseStatusSpan.style.color = 'green';
            };

            eventSource.onerror = () => {
                sseStatusSpan.textContent = 'Error';
                sseStatusSpan.style.color = 'red';
            };

            eventSource.onmessage = (event) => {
                document.getElementById('order-status-area').innerHTML = event.data;
            };
        });
    </script>
</div>
{{ end }}
